name: Python CI/CD –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# –†–∞–∑–¥–µ–ª: –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–æ—Ç –ø–∞–π–ø–ª–∞–π–Ω
on:
  # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫–∏:
  push:
    branches: [ main, develop ]  
  
  # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request :
  pull_request:
    branches: [ main ]  
  
  # –†–∞–∑—Ä–µ—à–∏—Ç—å —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ GitHub:
  workflow_dispatch:

# –†–∞–∑–¥–µ–ª: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
env:
  BASE_URL=https://app.tandoor.dev         # URL —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ALLURE_RESULTS: "allure-results"         # –ü–∞–ø–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
  ALLURE_REPORT: "public"                  # –ü–∞–ø–∫–∞ –¥–ª—è –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤

# –†–∞–∑–¥–µ–ª: –ó–∞–¥–∞—á–∏ (Jobs) - –æ—Å–Ω–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞
jobs:
  
  # ============================================
  # –ó–ê–î–ê–ß–ê 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
  # ============================================
  –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞:
    # –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ 
    name: " –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞"
    
    # –ù–∞ –∫–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–∞–ø—É—Å–∫–∞—Ç—å (ubuntu - –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ GitHub)
    runs-on: ubuntu-latest
    
    # –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (step-by-step –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
    steps:
    
    # –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    - name: " –°–∫–∞—á–∞—Ç—å –∫–æ–¥ —Å GitHub"
      uses: actions/checkout@v4  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç GitHub –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
    
    # –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11"
      uses: actions/setup-python@v4  # –î–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python
      with:  # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è
        python-version: '3.11'        # –í–µ—Ä—Å–∏—è Python
        cache: 'pip'                  # –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ 
    
    # –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    - name:  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
      run: |  # –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
        pip install --upgrade pip          # –û–±–Ω–æ–≤–∏—Ç—å pip (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)
        pip install -r requirements.txt    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞
        pip install flake8 black           # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã (–ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞)
    
    # –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
    - name: " –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Black)"
      run: |
        black --check --diff api/ pages/ tests/
      # Black - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Python –∫–æ–¥–∞
      # --check: —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å
      # --diff: –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–ª–∏—á–∏—è
    
    # –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞
    - name: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞ (flake8)"
      run: |
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
        flake8 api/ pages/ tests/ --count --select=E9,F63,F7,F82 --show-source --statistics
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è (—Å–ª–æ–∂–Ω–æ—Å—Ç—å, –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫ –∏ —Ç.–¥.)
        flake8 api/ pages/ tests/ --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics

  # ============================================
  # –ó–ê–î–ê–ß–ê 2: API —Ç–µ—Å—Ç—ã
  # ============================================
  api-—Ç–µ—Å—Ç—ã:
    name: " –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API"
    runs-on: ubuntu-latest
    needs: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞  # –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–∏ 
    
    steps:
    - name: " –°–∫–∞—á–∞—Ç—å –∫–æ–¥ —Å GitHub"
      uses: actions/checkout@v4
    
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11"
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        cache: 'pip'
    
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤"
      run: |
        pip install --upgrade pip
        pip install -r requirements.txt
        pip install allure-pytest  
    
    # –®–∞–≥: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (.env)
    - name: " –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ (.env)"
      run: |
        echo "BASE_URL=${{ env.BASE_URL }}" > .env
        
        # GitHub —Å–∫—Ä–æ–µ—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
        echo "TANDOOR_USERNAME=${{ secrets.TANDOOR_USERNAME }}" >> .env
        echo "TANDOOR_PASSWORD=${{ secrets.TANDOOR_PASSWORD }}" >> .env
        echo "TANDOOR_TOKEN=${{ secrets.TANDOOR_TOKEN || '' }}" >> .env
      # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª .env —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    
    # –®–∞–≥: –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Ç–µ—Å—Ç—ã
    - name: " –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Ç–µ—Å—Ç—ã"
      run: |
        python -m pytest tests/test_api.py -v --alluredir=${{ env.ALLURE_RESULTS }}
      # pytest - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      # -v: –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
      # --alluredir: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è Allure –æ—Ç—á–µ—Ç–æ–≤
    
    # –®–∞–≥: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
    - name: " –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤"
      uses: actions/upload-artifact@v3
      with:
        name: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-api-—Ç–µ—Å—Ç–æ–≤  # –ò–º—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
        path: |  # –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å
          ${{ env.ALLURE_RESULTS }}/  # –ü–∞–ø–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
          logs/                        # –ü–∞–ø–∫–∞ —Å –ª–æ–≥–∞–º–∏ 
        retention-days: 7  # –•—Ä–∞–Ω–∏—Ç—å 7 –¥–Ω–µ–π
  # ============================================
  # –ó–ê–î–ê–ß–ê 3: UI —Ç–µ—Å—Ç—ã 
  # ============================================
  ui-—Ç–µ—Å—Ç—ã:
    name: " –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (UI)"
    runs-on: ubuntu-latest
    needs: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞
    
    steps:
    - name: " –°–∫–∞—á–∞—Ç—å –∫–æ–¥ —Å GitHub"
      uses: actions/checkout@v4
    
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11"
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        cache: 'pip'
    
    # –®–∞–≥: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä Chrome
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Chrome –∏ ChromeDriver"
      run: |
        # –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
        sudo apt-get update
        
        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Chrome
        wget -q -O /tmp/chrome.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
        sudo apt install -y /tmp/chrome.deb
        
        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ChromeDriver (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–º)
        CHROME_VERSION=$(google-chrome --version | awk '{print $3}' | cut -d'.' -f1)
        wget -q -O /tmp/chromedriver.zip "https://storage.googleapis.com/chrome-for-testing-public/$CHROME_VERSION.0.6099.109/linux64/chromedriver-linux64.zip"
        sudo unzip /tmp/chromedriver.zip -d /usr/local/bin/
        sudo chmod +x /usr/local/bin/chromedriver-linux64/chromedriver
        sudo ln -sf /usr/local/bin/chromedriver-linux64/chromedriver /usr/local/bin/chromedriver
    
    - name: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤"
      run: |
        pip install --upgrade pip
        pip install -r requirements.txt
        pip install selenium webdriver-manager allure-pytest pytest-selenium
      # selenium - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞
      # webdriver-manager - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤
    
    - name: " –°–æ–∑–¥–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤"
      run: |
        echo "TANDOOR_URL=${{ env.TANDOOR_URL }}" > .env
        echo "BROWSER=chrome" >> .env
        echo "HEADLESS=true" >> .env  # –ë–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–±—ã—Å—Ç—Ä–µ–µ)
    
    - name: " –ó–∞–ø—É—Å—Ç–∏—Ç—å UI —Ç–µ—Å—Ç—ã"
      run: |
        python -m pytest tests/test_ui.py tests/test_login.py -v --alluredir=${{ env.ALLURE_RESULTS }}
    
    - name: " –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã UI —Ç–µ—Å—Ç–æ–≤"
      uses: actions/upload-artifact@v3
      with:
        name: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-ui-—Ç–µ—Å—Ç–æ–≤
        path: |
          ${{ env.ALLURE_RESULTS }}/
          screenshots/  # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –æ—à–∏–±–æ–∫
        retention-days: 7

  # ============================================
  # –ó–ê–î–ê–ß–ê 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞
  # ============================================
  –≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–æ—Ç—á–µ—Ç–∞:
    name: " –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Allure –æ—Ç—á–µ—Ç–∞"
    runs-on: ubuntu-latest
    needs: [api-—Ç–µ—Å—Ç—ã, ui-—Ç–µ—Å—Ç—ã]  
    if: always()  # –í—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏
    
    steps:
    - name: " –°–∫–∞—á–∞—Ç—å –∫–æ–¥ —Å GitHub"
      uses: actions/checkout@v4
    
    # –®–∞–≥: –°–∫–∞—á–∞—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
    - name: " –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤"
      uses: actions/download-artifact@v3
      with:
        path: –≤—Å–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã  # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
    
    # –®–∞–≥: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    - name: " –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤"
      run: |
        mkdir -p ${{ env.ALLURE_RESULTS }}
        # –ù–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–¥–Ω—É –ø–∞–ø–∫—É
        find –≤—Å–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -name "*.json" -o -name "*.txt" | xargs -I {} cp {} ${{ env.ALLURE_RESULTS }}/
    
    # –®–∞–≥: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Java (–Ω—É–∂–Ω–∞ –¥–ª—è Allure)
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Java"
      run: sudo apt-get install -y openjdk-11-jre-headless
    
    # –®–∞–≥: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Allure
    - name: " –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Allure"
      run: |
        # –°–∫–∞—á–∞—Ç—å Allure
        sudo wget -q -O allure-2.24.0.tgz https://github.com/allure-framework/allure2/releases/download/2.24.0/allure-2.24.0.tgz
        # –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
        sudo tar -zxvf allure-2.24.0.tgz -C /opt/
        # –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É
        sudo ln -s /opt/allure-2.24.0/bin/allure /usr/bin/allure
    
    # –®–∞–≥: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML –æ—Ç—á–µ—Ç
    - name: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å HTML –æ—Ç—á–µ—Ç"
      run: |
        allure generate ${{ env.ALLURE_RESULTS }} -o ${{ env.ALLURE_REPORT }} --clean
        echo "–û—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø–∞–ø–∫–µ ${{ env.ALLURE_REPORT }}/"
    
    # –®–∞–≥: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
    - name: " –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç"
      uses: actions/upload-artifact@v3
      with:
        name: allure-–æ—Ç—á–µ—Ç
        path: ${{ env.ALLURE_REPORT }}/
        retention-days: 30

  # ============================================
  # –ó–ê–î–ê–ß–ê 5: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –Ω–∞ GitHub Pages
  # ============================================
  –ø—É–±–ª–∏–∫–∞—Ü–∏—è-–æ—Ç—á–µ—Ç–∞:
    name: "üåê –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ"
    runs-on: ubuntu-latest
    needs: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–æ—Ç—á–µ—Ç–∞
    # –í—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è main –≤–µ—Ç–∫–∏:
    if: github.ref == 'refs/heads/main'
    
    # –ü—Ä–∞–≤–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ GitHub Pages
    permissions:
      pages: write    # –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ Pages
      id-token: write # –†–∞–∑—Ä–µ—à–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
    
    steps:
    # –®–∞–≥: –°–∫–∞—á–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç
    - name: " –°–∫–∞—á–∞—Ç—å Allure –æ—Ç—á–µ—Ç"
      uses: actions/download-artifact@v3
      with:
        name: allure-–æ—Ç—á–µ—Ç
    
    # –®–∞–≥: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Pages
    - name: " –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Pages"
      uses: actions/configure-pages@v3
    
    # –®–∞–≥: –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç—á–µ—Ç –Ω–∞ Pages
    - name: " –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç—á–µ—Ç –Ω–∞ GitHub Pages"
      uses: actions/upload-pages-artifact@v2
      with:
        path: allure-–æ—Ç—á–µ—Ç/  # –ü–∞–ø–∫–∞ —Å –æ—Ç—á–µ—Ç–æ–º
    
    # –®–∞–≥: –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç
    - name: "üöÄ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç"
      id: –ø—É–±–ª–∏–∫–∞—Ü–∏—è
      uses: actions/deploy-pages@v2
