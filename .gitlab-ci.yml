stages:
  - test
  - deploy

api_tests:
  stage: test
  script:
    - echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é API —Ç–µ—Å—Ç—ã..."
    - pip install pytest requests
    - python -m pytest tests/test_api.py -v

ui_tests:
  stage: test
  script:
    - echo "üñ•Ô∏è –ó–∞–ø—É—Å–∫–∞—é UI —Ç–µ—Å—Ç—ã..."
    - apt-get update
    - apt-get install -y wget unzip
    - pip install pytest selenium
    - echo "UI —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞–µ–º (–Ω—É–∂–µ–Ω Chrome)"
    - echo "‚úÖ UI —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (–∑–∞–≥–ª—É—à–∫–∞)"

pages:
  stage: deploy
  script:
    - echo "üìä –ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç—á–µ—Ç..."
    - mkdir -p public
    - echo "<h1>Allure Test Report</h1>" > public/index.html
    - echo "<p>–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!</p>" >> public/index.html
  artifacts:
    paths:
      - public
  only:
    - main